<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Quick Intro To Bash Scripting | Netsparse · Angel Nevarez</title><meta name=keywords content="linux,bash,scripting,automation,sysadmin"><meta name=description content="Bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems, such as Linux and macOS.
It can be used for a variety of purposes, including system administration, web development, data analysis, and more.
Here&rsquo;s a quick overview from Fireship.io.
Components Commands Consist of a series of commands that are executed one after the other.
These commands can be standard Linux commands or custom commands written specifically for the script."><meta name=author content="Angel"><link rel=canonical href=https://netsparse.dev/posts/2023-03/quick-bash-scripting/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://netsparse.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://netsparse.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://netsparse.dev/favicon.ico><link rel=mask-icon href=https://netsparse.dev/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-H4GRFCYEJN"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H4GRFCYEJN",{anonymize_ip:!1})}</script><meta property="og:title" content="Quick Intro To Bash Scripting"><meta property="og:description" content="Bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems, such as Linux and macOS.
It can be used for a variety of purposes, including system administration, web development, data analysis, and more.
Here&rsquo;s a quick overview from Fireship.io.
Components Commands Consist of a series of commands that are executed one after the other.
These commands can be standard Linux commands or custom commands written specifically for the script."><meta property="og:type" content="article"><meta property="og:url" content="https://netsparse.dev/posts/2023-03/quick-bash-scripting/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-21T20:46:08-05:00"><meta property="article:modified_time" content="2023-03-21T20:46:08-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Quick Intro To Bash Scripting"><meta name=twitter:description content="Bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems, such as Linux and macOS.
It can be used for a variety of purposes, including system administration, web development, data analysis, and more.
Here&rsquo;s a quick overview from Fireship.io.
Components Commands Consist of a series of commands that are executed one after the other.
These commands can be standard Linux commands or custom commands written specifically for the script."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://netsparse.dev/posts/"},{"@type":"ListItem","position":3,"name":"Quick Intro To Bash Scripting","item":"https://netsparse.dev/posts/2023-03/quick-bash-scripting/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Quick Intro To Bash Scripting","name":"Quick Intro To Bash Scripting","description":"Bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems, such as Linux and macOS.\nIt can be used for a variety of purposes, including system administration, web development, data analysis, and more.\nHere\u0026rsquo;s a quick overview from Fireship.io.\nComponents Commands Consist of a series of commands that are executed one after the other.\nThese commands can be standard Linux commands or custom commands written specifically for the script.","keywords":["linux","bash","scripting","automation","sysadmin"],"articleBody":"Bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems, such as Linux and macOS.\nIt can be used for a variety of purposes, including system administration, web development, data analysis, and more.\nHere’s a quick overview from Fireship.io.\nComponents Commands Consist of a series of commands that are executed one after the other.\nThese commands can be standard Linux commands or custom commands written specifically for the script.\n1 2 3 echo \"Hello World\" # prints \"Hello World\" to the console ls /home/user # lists files in the user's home directory touch new_file.txt # creates a new empty file named \"new_file.txt\" Variables Use variables to store and manipulate data.\nVariables can be assigned values, used in arithmetic and string operations, and passed as arguments to commands.\n1 2 3 4 5 name=\"John\" echo \"Hello $name\" # prints \"Hello John\" to the console number=10 result=$((number + 5)) echo $result # prints \"15\" to the console Control Structures You can use control structures like if-else statements, loops, and functions to control the flow of execution.\nThese structures allow scripts to make decisions, repeat tasks, and perform complex operations.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 if [[ -d \"/home/user\" ]]; then echo \"The /home/user directory exists\" else echo \"The /home/user directory does not exist\" fi for i in {1..5}; do echo $i done function say_hello() { echo \"Hello\" } say_hello Input and Output Bash scripts can read input from various sources, including standard input, command-line arguments, and files.\nThey can also write output to standard output, files, and other destinations.\n1 2 3 4 5 read -p \"What is your name? \" name echo \"Hello $name\" cat file.txt # prints the contents of file.txt to the console echo \"Hello\" \u003e file.txt # writes \"Hello\" to file.txt Error Handling Errors and exceptions using error codes, traps, and logging.\nThey can also send email notifications and perform other actions in response to errors.\n1 2 3 4 5 6 7 command_that_might_fail || echo \"An error occurred\" trap 'echo \"An error occurred\"; exit 1' ERR echo \"Starting script\" some_command || exit 1 echo \"Script completed successfully\" Regular Expressions (RegEx) You can use regular expressions to perform pattern matching and text manipulation.\nRegular expressions are a powerful tool for searching and replacing text within a script.\nYou can check out RegExr to learn more about how they work.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # Extracting email addresses from a file cat file.txt | grep -oE '[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}' # Extracting phone numbers from a string text=\"My phone number is 123-456-7890\" echo $text | grep -oE '[0-9]{3}-[0-9]{3}-[0-9]{4}' # Replacing all occurrences of a string in multiple files find . -type f -name '*.txt' -exec sed -i 's/old_string/new_string/g' {} + # Extracting all URLs from an HTML file cat index.html | grep -oE 'https?://[^ ]+' # Replacing all occurrences of 'foo' with 'bar' in a string text=\"The quick brown foo jumps over the lazy dog\" echo ${text/foo/bar} Functions Define functions to encapsulate and reuse code.\nFunctions can take arguments, return values, and be used to perform complex tasks.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # A function that returns the sum of two numbers function add_numbers() { local result=$(( $1 + $2 )) echo $result } # A function that prints a message function say_hello() { echo \"Hello, world!\" } # Using the functions sum=$(add_numbers 5 7) echo \"The sum is: $sum\" say_hello Get Started For Basic Systems Administration In this post, we’ll explore some of use cases for bash scripting and provide some examples that could be of use for you and your environment.\nPerforming Updates We know updates are definitely important, so why not automate them in some way.\nCreate a auto-updates.sh script and add the following:\n1 2 3 #!/bin/bash sudo apt-get update sudo apt-get upgrade -y Make Executable 1 chmod +x /path/to/auto-updates.sh You can also add this script to the crontab to automate your updates for your system.\nRenaming Files Renaming files can be a tedious and time-consuming task, especially when you have a large number of files to rename.\nWe could make it easier for ourselves by creating a script to automate this for us.\nThe basic command to rename files in Bash is mv.\nTo rename a file named old_name.txt to new_name.txt, you can use the mv command as below:\n1 mv old_name.txt new_name.txt Renaming Multiple Files If you want to rename multiple files at once, you can use a Bash script to automate the process.\nHere is an example of how to rename all files in a directory with the .txt extension:\n1 2 3 4 5 #!/bin/bash for file in *.txt do mv \"$file\" \"new_${file}\" done This script will add the prefix new_ to the beginning of each file name with the .txt extension.\nMoving Files Moving files is another task that can be automated with Bash scripting.\nThe mv command can also be used to move files from one directory to another.\nHere is an example of how to move a file named file.txt from the current directory to the directory /home/user/documents/:\n1 mv file.txt /home/user/documents/ This command will move the file file.txt to the directory /home/user/documents/.\nMoving Multiple Files To move multiple files at once, you can use a Bash script.\nHere is an example of how to move all files in a directory with the .txt extension to a new directory:\n1 2 3 4 5 6 #!/bin/bash mkdir /home/user/documents/txt_files for file in *.txt do mv \"$file\" /home/user/documents/txt_files/ done Performing Backups 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #!/bin/bash backup_dirs=(\"/etc\" \"/home\" \"/boot\") dest_dir=\"/backup\" backup_date=$(date +%b-%d-%y) echo \"Starting backup of: ${backup_dirs[@]}\" for i in \"${backup_dirs[@]}\"; do sudo tar -Pczf /tmp/$i-$backup_date.tar.gz $i if [ $? -eq 0 ]; then echo \"$i backup succeeded.\" else echo \"$i backup failed.\" fi done sudo mkdir -p $dest_dir sudo mv /tmp/*.gz $dest_dir echo \"Backup is done.\" This should perform a backup with tar of the /etc, /home, and boot directories to the specified directory (in this case/backup). Which could then be transferred to another machine once the backup is finished.\nOther Use Cases Web Development Bash scripts are also useful for web developers who need to automate repetitive tasks such as deploying code, running tests, and building websites.\nFor example, a web developer can use a bash script to automate the process of deploying code to a production server.\n1 2 3 4 5 #!/bin/bash git pull npm install npm run build rsync -avz --exclude=node_modules /path/to/local/code/ user@server:/path/to/production/code/ Data Analysis Bash scripting is also useful for parsing fairly large amounts of data, and automating tasks such as data cleaning, data transformation, and data visualization.\nFor example, you can use a bash script to clean a large CSV file and generate a summary report.\nThe script can contain commands that remove duplicates, filter rows, and aggregate data.\nYou’ll need the csvkit package which can be installed with apt install.\n1 2 #!/bin/bash csvclean input.csv | csvstat \u003e report.txt Docker Quickly Install Docker 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash # Install Docker sudo apt-get update sudo apt-get install -y docker.io # Start Docker daemon sudo systemctl start docker # Download and run \"hello-world\" container sudo docker run hello-world Cron cron is a utility program that allows users to schedule commands or scripts to run automatically at specified intervals in Linux-based operating systems.\nThe name “cron” comes from the Greek word “chronos”, which means “time”. The cron daemon is a background process that runs continuously and checks the crontab files for any scheduled jobs to run.\nAdding Items to the Cron 1 crontab -e If this is the first time you’re editing your crontab file, the system may ask you to choose an editor.\nIn the editor, add a new line for each command or script you want to schedule. The format of the line is as follows:\n1 * * * * * command-to-be-executed The asterisks represent the timing specification for the command, which defines when it should be executed.\nFor example, if you want a command to run every day at midnight, you would use the following line:\n1 0 0 * * * command-to-be-executed The cron daemon will automatically read the updated crontab file and start executing the scheduled commands at the specified intervals.\nYou can verify that your new items have been added to your crontab file by typing the following command:\n1 crontab -l Check out this helpful tool for editing your cron schedule expressions.\nAdd Scripts to Cron 1 * * * * * /path/to/script.sh If you want to redirect stdout and errors to a file, you can modify the cron command like this:\n1 0 0 * * * /path/to/script.sh \u003e\u003e /path/to/output.log 2\u003e\u00261 Automating Backups You can utilize scripts and cron to perform backups, send them off to a remote server, and send a notification when they are done.\nExample:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #!/bin/bash # Backup directory path local_backup_dir=\"$HOME/backups\" # Remote server IP address remote_user=\"example\" remote_server=\"192.168.2.200\" remote_backup_dir=\"/backups\" # Email address for notifications notification_email=\"alerts@example.com\" # Create a backup with tar in local dir, send it to a remote server, and send a notification when done mkdir -p \"$local_backup_dir\" backup_path=\"$local_backup_dir/$(date +%Y-%m-%d)\" tar -czvf \"$backup_path.tar.gz\" -C \"$HOME\" \"$(basename $local_backup_dir)\" if [ $? -eq 0 ]; then echo \"Backup succeeded.\" else echo \"Backup failed.\" exit 1 fi rsync -avz --delete \"$backup_path.tar.gz\" \"$remote_user@$remote_server:$remote_backup_dir\" if [ $? -eq 0 ]; then echo \"Transfer succeeded.\" else echo \"Transfer failed.\" exit 1 fi echo \"Backup completed on $(date).\" | mail -s \"Backup completed\" \"$notification_email\" # Define a cronjob that runs this backup every 3 days at 10pm (crontab -l ; echo \"0 22 */3 * * /bin/bash /path/to/script.sh\") | crontab - Snapshots with Timeshift Timeshift is a free and open-source backup/restore utility for Linux systems.\nIt creates snapshots of the file system, allowing users to restore their system to a previous state if needed. Timeshift can be run manually or scheduled to run automatically using cron.\nSnapshots can be stored locally or remotely, and users can choose the number of snapshots to keep and the frequency of snapshots.\nYou can create a bash script for defining how you would like timeshift to run, make sure to include sudo when running:\n1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash # Set the snapshot directory snapshot_dir=\"/run/timeshift//backup\" # Set the maximum number of snapshots to keep max_snapshots=10 # Set the backup level (can be \"system\" or \"home\") backup_level=\"system\" # Create a new snapshot with Timeshift timeshift --snapshot --create --comments \"Automated snapshot on $(date +%Y-%m-%d)\" --backup-device \"$backup_level\" You can then add this entry to your crontab to have cron run it every 3 days at 1am, or after your backups are done.\n1 0 1 */3 * * /home/user/scripts/timeshift-auto.sh If you would like to simply add it to cron manually, you can simply add the following:\nMake sure to specify the under --backup-device.\n1 0 1 */3 * * /usr/bin/timeshift --snapshot --create --comments \"Automated snapshot on $(date +\\%Y-\\%m-\\%d)\" --backup-device \"/run/timeshift//backup\" --scripted Learn More Make sure to check out the official Bash manual and other awesome guides like The Linux Documentation Project’s Beginner and Advanced Bash Scripting Guide, GreyCat’s BashGuide, and commandlinefu.\nConclusion Although Bash is useful for automating tasks on a single host, if you wish to replicate this and multiply it across a multitude of hosts, you should take a look at my other Ansible post, where we take this to another level.\nIn conclusion, bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems.\nBy writing scripts, you can save time, reduce errors, and improve productivity.\nLearn More Official GNU Bash Manual learnshell.org BashGuide TLDP MrTutorize YouTube Series Code Academy Devhints.io Cheat Sheet BashHackers Tools Shellcheck ","wordCount":"2042","inLanguage":"en","datePublished":"2023-03-21T20:46:08-05:00","dateModified":"2023-03-21T20:46:08-05:00","author":{"@type":"Person","name":"Angel"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://netsparse.dev/posts/2023-03/quick-bash-scripting/"},"publisher":{"@type":"Organization","name":"Netsparse · Angel Nevarez","logo":{"@type":"ImageObject","url":"https://netsparse.dev/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://netsparse.dev accesskey=h title=Home><img src=/images/site-logo/cable-128.ico alt=logo aria-label=logo width=30 height=30></a></a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Dark/Light Mode)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://netsparse.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://netsparse.dev/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://netsparse.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://netsparse.dev/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://netsparse.dev/contact/ title=Contact><span>Contact</span></a></li><li><a href=https://netsparse.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://netsparse.dev>Home</a>&nbsp;»&nbsp;<a href=https://netsparse.dev/posts/>Posts</a></div><h1 class=post-title>Quick Intro To Bash Scripting</h1><div class=post-meta><span title='2023-03-21 20:46:08 -0500 CDT'>March 21, 2023</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;2042 words&nbsp;·&nbsp;Angel</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#components aria-label=Components>Components</a><ul><li><a href=#commands aria-label=Commands>Commands</a></li><li><a href=#variables aria-label=Variables>Variables</a></li><li><a href=#control-structures aria-label="Control Structures">Control Structures</a></li><li><a href=#input-and-output aria-label="Input and Output">Input and Output</a></li><li><a href=#error-handling aria-label="Error Handling">Error Handling</a></li><li><a href=#regular-expressions-regex aria-label="Regular Expressions (RegEx)">Regular Expressions (RegEx)</a></li><li><a href=#functions aria-label=Functions>Functions</a></li></ul></li><li><a href=#get-started aria-label="Get Started">Get Started</a></li><li><a href=#for-basic-systems-administration aria-label="For Basic Systems Administration">For Basic Systems Administration</a><ul><li><a href=#performing-updates aria-label="Performing Updates">Performing Updates</a></li><li><a href=#make-executable aria-label="Make Executable">Make Executable</a></li><li><a href=#renaming-files aria-label="Renaming Files">Renaming Files</a><ul><li><a href=#renaming-multiple-files aria-label="Renaming Multiple Files">Renaming Multiple Files</a></li></ul></li><li><a href=#moving-files aria-label="Moving Files">Moving Files</a><ul><li><a href=#moving-multiple-files aria-label="Moving Multiple Files">Moving Multiple Files</a></li></ul></li><li><a href=#performing-backups aria-label="Performing Backups">Performing Backups</a></li></ul></li><li><a href=#other-use-cases aria-label="Other Use Cases">Other Use Cases</a><ul><li><a href=#web-development aria-label="Web Development">Web Development</a></li><li><a href=#data-analysis aria-label="Data Analysis">Data Analysis</a></li><li><a href=#docker aria-label=Docker>Docker</a><ul><li><a href=#quickly-install-docker aria-label="Quickly Install Docker">Quickly Install Docker</a></li></ul></li></ul></li><li><a href=#cron aria-label=Cron>Cron</a><ul><li><a href=#adding-items-to-the-cron aria-label="Adding Items to the Cron">Adding Items to the Cron</a></li><li><a href=#add-scripts-to-cron aria-label="Add Scripts to Cron">Add Scripts to Cron</a></li><li><a href=#automating-backups aria-label="Automating Backups">Automating Backups</a></li><li><a href=#snapshots-with-timeshift aria-label="Snapshots with Timeshift">Snapshots with Timeshift</a></li></ul></li><li><a href=#learn-more aria-label="Learn More">Learn More</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a><ul><li><a href=#learn-more-1 aria-label="Learn More">Learn More</a></li><li><a href=#tools aria-label=Tools>Tools</a></li></ul></li></ul></div></details></div><div class=post-content><p><a href=https://www.gnu.org/software/bash/>Bash</a> scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems, such as Linux and macOS.</p><p>It can be used for a variety of purposes, including system administration, web development, data analysis, and more.</p><p>Here&rsquo;s a quick overview from <a href=https://fireship.io/>Fireship.io</a>.</p><div class=embed-youtube data-video-id=I4EWvMFj37g><div class=embed-youtube-play></div></div><script src=/js/custom.js></script><h2 id=components>Components<a hidden class=anchor aria-hidden=true href=#components>#</a></h2><h3 id=commands>Commands<a hidden class=anchor aria-hidden=true href=#commands>#</a></h3><p>Consist of a series of commands that are executed one after the other.</p><p>These commands can be standard Linux commands or custom commands written specifically for the script.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello World&#34;</span>  <span class=c1># prints &#34;Hello World&#34; to the console</span>
</span></span><span class=line><span class=cl>ls /home/user       <span class=c1># lists files in the user&#39;s home directory</span>
</span></span><span class=line><span class=cl>touch new_file.txt  <span class=c1># creates a new empty file named &#34;new_file.txt&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=variables>Variables<a hidden class=anchor aria-hidden=true href=#variables>#</a></h3><p>Use variables to store and manipulate data.</p><p>Variables can be assigned values, used in arithmetic and string operations, and passed as arguments to commands.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>name</span><span class=o>=</span><span class=s2>&#34;John&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello </span><span class=nv>$name</span><span class=s2>&#34;</span>  <span class=c1># prints &#34;Hello John&#34; to the console</span>
</span></span><span class=line><span class=cl><span class=nv>number</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl><span class=nv>result</span><span class=o>=</span><span class=k>$((</span>number <span class=o>+</span> <span class=m>5</span><span class=k>))</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$result</span>        <span class=c1># prints &#34;15&#34; to the console</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=control-structures>Control Structures<a hidden class=anchor aria-hidden=true href=#control-structures>#</a></h3><p>You can use control structures like if-else statements, loops, and functions to control the flow of execution.</p><p>These structures allow scripts to make decisions, repeat tasks, and perform complex operations.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -d <span class=s2>&#34;/home/user&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;The /home/user directory exists&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;The /home/user directory does not exist&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> i in <span class=o>{</span>1..5<span class=o>}</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=nv>$i</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> say_hello<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Hello&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>say_hello
</span></span></code></pre></td></tr></table></div></div><h3 id=input-and-output>Input and Output<a hidden class=anchor aria-hidden=true href=#input-and-output>#</a></h3><p>Bash scripts can read input from various sources, including standard input, command-line arguments, and files.</p><p>They can also write output to standard output, files, and other destinations.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>read</span> -p <span class=s2>&#34;What is your name? &#34;</span> name
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello </span><span class=nv>$name</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat file.txt      <span class=c1># prints the contents of file.txt to the console</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hello&#34;</span> &gt; file.txt  <span class=c1># writes &#34;Hello&#34; to file.txt</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=error-handling>Error Handling<a hidden class=anchor aria-hidden=true href=#error-handling>#</a></h3><p>Errors and exceptions using error codes, traps, and logging.</p><p>They can also send email notifications and perform other actions in response to errors.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>command_that_might_fail <span class=o>||</span> <span class=nb>echo</span> <span class=s2>&#34;An error occurred&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>trap</span> <span class=s1>&#39;echo &#34;An error occurred&#34;; exit 1&#39;</span> ERR
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Starting script&#34;</span>
</span></span><span class=line><span class=cl>some_command <span class=o>||</span> <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Script completed successfully&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=regular-expressions-regex>Regular Expressions (RegEx)<a hidden class=anchor aria-hidden=true href=#regular-expressions-regex>#</a></h3><p>You can use regular expressions to perform pattern matching and text manipulation.</p><p>Regular expressions are a powerful tool for searching and replacing text within a script.</p><p>You can check out <a href=https://regexr.com/>RegExr</a> to learn more about how they work.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Extracting email addresses from a file</span>
</span></span><span class=line><span class=cl>cat file.txt <span class=p>|</span> grep -oE <span class=s1>&#39;[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}&#39;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extracting phone numbers from a string</span>
</span></span><span class=line><span class=cl><span class=nv>text</span><span class=o>=</span><span class=s2>&#34;My phone number is 123-456-7890&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$text</span> <span class=p>|</span> grep -oE <span class=s1>&#39;[0-9]{3}-[0-9]{3}-[0-9]{4}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Replacing all occurrences of a string in multiple files</span>
</span></span><span class=line><span class=cl>find . -type f -name <span class=s1>&#39;*.txt&#39;</span> -exec sed -i <span class=s1>&#39;s/old_string/new_string/g&#39;</span> <span class=o>{}</span> +
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Extracting all URLs from an HTML file</span>
</span></span><span class=line><span class=cl>cat index.html <span class=p>|</span> grep -oE <span class=s1>&#39;https?://[^ ]+&#39;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Replacing all occurrences of &#39;foo&#39; with &#39;bar&#39; in a string</span>
</span></span><span class=line><span class=cl><span class=nv>text</span><span class=o>=</span><span class=s2>&#34;The quick brown foo jumps over the lazy dog&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${</span><span class=nv>text</span><span class=p>/foo/bar</span><span class=si>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=functions>Functions<a hidden class=anchor aria-hidden=true href=#functions>#</a></h3><p>Define functions to encapsulate and reuse code.</p><p>Functions can take arguments, return values, and be used to perform complex tasks.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># A function that returns the sum of two numbers</span>
</span></span><span class=line><span class=cl><span class=k>function</span> add_numbers<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>local</span> <span class=nv>result</span><span class=o>=</span><span class=k>$((</span> <span class=nv>$1</span> <span class=o>+</span> <span class=nv>$2</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=nv>$result</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># A function that prints a message</span>
</span></span><span class=line><span class=cl><span class=k>function</span> say_hello<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Hello, world!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Using the functions</span>
</span></span><span class=line><span class=cl><span class=nv>sum</span><span class=o>=</span><span class=k>$(</span>add_numbers <span class=m>5</span> 7<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;The sum is: </span><span class=nv>$sum</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>say_hello
</span></span></code></pre></td></tr></table></div></div><h2 id=get-started>Get Started<a hidden class=anchor aria-hidden=true href=#get-started>#</a></h2><h2 id=for-basic-systems-administration>For Basic Systems Administration<a hidden class=anchor aria-hidden=true href=#for-basic-systems-administration>#</a></h2><p>In this post, we&rsquo;ll explore some of use cases for bash scripting and provide some examples that could be of use for you and your environment.</p><h3 id=performing-updates>Performing Updates<a hidden class=anchor aria-hidden=true href=#performing-updates>#</a></h3><p>We know updates are definitely important, so why not automate them in some way.</p><p>Create a <code>auto-updates.sh</code> script and add the following:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get upgrade -y
</span></span></code></pre></td></tr></table></div></div><h3 id=make-executable>Make Executable<a hidden class=anchor aria-hidden=true href=#make-executable>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x /path/to/auto-updates.sh
</span></span></code></pre></td></tr></table></div></div><p>You can also add this script to the <a href=/posts/2023-03/quick-bash-scripting/#adding-items-to-the-cron>crontab</a> to automate your updates for your system.</p><h3 id=renaming-files>Renaming Files<a hidden class=anchor aria-hidden=true href=#renaming-files>#</a></h3><p>Renaming files can be a tedious and time-consuming task, especially when you have a large number of files to rename.</p><p>We could make it easier for ourselves by creating a script to automate this for us.</p><p>The basic command to rename files in Bash is <code>mv</code>.</p><p>To rename a file named <code>old_name.txt</code> to <code>new_name.txt</code>, you can use the <code>mv</code> command as below:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mv old_name.txt new_name.txt
</span></span></code></pre></td></tr></table></div></div><h4 id=renaming-multiple-files>Renaming Multiple Files<a hidden class=anchor aria-hidden=true href=#renaming-multiple-files>#</a></h4><p>If you want to rename multiple files at once, you can use a Bash script to automate the process.</p><p>Here is an example of how to rename all files in a directory with the <code>.txt</code> extension:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>for</span> file in *.txt
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  mv <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span> <span class=s2>&#34;new_</span><span class=si>${</span><span class=nv>file</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><p>This script will add the prefix <code>new_</code> to the beginning of each file name with the <code>.txt</code> extension.</p><h3 id=moving-files>Moving Files<a hidden class=anchor aria-hidden=true href=#moving-files>#</a></h3><p>Moving files is another task that can be automated with Bash scripting.</p><p>The <code>mv</code> command can also be used to move files from one directory to another.</p><p>Here is an example of how to move a file named <code>file.txt</code> from the current directory to the directory <code>/home/user/documents/</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mv file.txt /home/user/documents/
</span></span></code></pre></td></tr></table></div></div><p>This command will move the file <code>file.txt</code> to the directory <code>/home/user/documents/</code>.</p><h4 id=moving-multiple-files>Moving Multiple Files<a hidden class=anchor aria-hidden=true href=#moving-multiple-files>#</a></h4><p>To move multiple files at once, you can use a Bash script.</p><p>Here is an example of how to move all files in a directory with the <code>.txt</code> extension to a new directory:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>mkdir /home/user/documents/txt_files
</span></span><span class=line><span class=cl><span class=k>for</span> file in *.txt
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>  mv <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span> /home/user/documents/txt_files/
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=performing-backups>Performing Backups<a hidden class=anchor aria-hidden=true href=#performing-backups>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>backup_dirs</span><span class=o>=(</span><span class=s2>&#34;/etc&#34;</span> <span class=s2>&#34;/home&#34;</span> <span class=s2>&#34;/boot&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>dest_dir</span><span class=o>=</span><span class=s2>&#34;/backup&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>backup_date</span><span class=o>=</span><span class=k>$(</span>date +%b-%d-%y<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Starting backup of: </span><span class=si>${</span><span class=nv>backup_dirs</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> i in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>backup_dirs</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    sudo tar -Pczf /tmp/<span class=nv>$i</span>-<span class=nv>$backup_date</span>.tar.gz <span class=nv>$i</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> <span class=nv>$?</span> -eq <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$i</span><span class=s2> backup succeeded.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$i</span><span class=s2> backup failed.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo mkdir -p <span class=nv>$dest_dir</span>
</span></span><span class=line><span class=cl>sudo mv /tmp/*.gz <span class=nv>$dest_dir</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Backup is done.&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>This should perform a backup with <code>tar</code> of the <code>/etc</code>, <code>/home</code>, and <code>boot</code> directories to the <code>specified directory</code> (in this case<code>/backup</code>). Which could then be transferred to another machine once the backup is finished.</p><h2 id=other-use-cases>Other Use Cases<a hidden class=anchor aria-hidden=true href=#other-use-cases>#</a></h2><h3 id=web-development>Web Development<a hidden class=anchor aria-hidden=true href=#web-development>#</a></h3><p>Bash scripts are also useful for web developers who need to automate repetitive tasks such as deploying code, running tests, and building websites.</p><p>For example, a web developer can use a bash script to automate the process of deploying code to a production server.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>git pull
</span></span><span class=line><span class=cl>npm install
</span></span><span class=line><span class=cl>npm run build
</span></span><span class=line><span class=cl>rsync -avz --exclude<span class=o>=</span>node_modules /path/to/local/code/ user@server:/path/to/production/code/
</span></span></code></pre></td></tr></table></div></div><h3 id=data-analysis>Data Analysis<a hidden class=anchor aria-hidden=true href=#data-analysis>#</a></h3><p>Bash scripting is also useful for parsing fairly large amounts of data, and automating tasks such as data cleaning, data transformation, and data visualization.</p><p>For example, you can use a bash script to clean a large CSV file and generate a summary report.</p><p>The script can contain commands that remove duplicates, filter rows, and aggregate data.</p><p>You&rsquo;ll need the <code>csvkit</code> package which can be installed with <code>apt install</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>csvclean input.csv <span class=p>|</span> csvstat &gt; report.txt
</span></span></code></pre></td></tr></table></div></div><h3 id=docker>Docker<a hidden class=anchor aria-hidden=true href=#docker>#</a></h3><h4 id=quickly-install-docker>Quickly Install Docker<a hidden class=anchor aria-hidden=true href=#quickly-install-docker>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Install Docker</span>
</span></span><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install -y docker.io
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Start Docker daemon</span>
</span></span><span class=line><span class=cl>sudo systemctl start docker
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Download and run &#34;hello-world&#34; container</span>
</span></span><span class=line><span class=cl>sudo docker run hello-world
</span></span></code></pre></td></tr></table></div></div><h2 id=cron>Cron<a hidden class=anchor aria-hidden=true href=#cron>#</a></h2><p><code>cron</code> is a utility program that allows users to schedule commands or scripts to run automatically at specified intervals in Linux-based operating systems.</p><p>The name &ldquo;cron&rdquo; comes from the Greek word &ldquo;chronos&rdquo;, which means &ldquo;time&rdquo;. The cron daemon is a background process that runs continuously and checks the crontab files for any scheduled jobs to run.</p><h3 id=adding-items-to-the-cron>Adding Items to the Cron<a hidden class=anchor aria-hidden=true href=#adding-items-to-the-cron>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><p>If this is the first time you&rsquo;re editing your crontab file, the system may ask you to choose an editor.</p><p>In the editor, add a new line for each command or script you want to schedule. The format of the line is as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>* * * * * command-to-be-executed
</span></span></code></pre></td></tr></table></div></div><p>The asterisks represent the timing specification for the command, which defines when it should be executed.</p><p>For example, if you want a command to run every day at midnight, you would use the following line:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>0</span> <span class=m>0</span> * * * command-to-be-executed
</span></span></code></pre></td></tr></table></div></div><p>The cron daemon will automatically read the updated crontab file and start executing the scheduled commands at the specified intervals.</p><p>You can verify that your new items have been added to your crontab file by typing the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -l
</span></span></code></pre></td></tr></table></div></div><p>Check out this <a href=https://crontab.guru/>helpful tool</a> for editing your cron schedule expressions.</p><h3 id=add-scripts-to-cron>Add Scripts to Cron<a hidden class=anchor aria-hidden=true href=#add-scripts-to-cron>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>* * * * * /path/to/script.sh
</span></span></code></pre></td></tr></table></div></div><p>If you want to redirect <code>stdout</code> and errors to a file, you can modify the cron command like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>0 0 * * * /path/to/script.sh &gt;&gt; /path/to/output.log 2&gt;&amp;1
</span></span></code></pre></td></tr></table></div></div><h3 id=automating-backups>Automating Backups<a hidden class=anchor aria-hidden=true href=#automating-backups>#</a></h3><p>You can utilize scripts and <code>cron</code> to perform backups, send them off to a remote server, and send a notification when they are done.</p><p>Example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Backup directory path</span>
</span></span><span class=line><span class=cl><span class=nv>local_backup_dir</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/backups&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remote server IP address</span>
</span></span><span class=line><span class=cl><span class=nv>remote_user</span><span class=o>=</span><span class=s2>&#34;example&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>remote_server</span><span class=o>=</span><span class=s2>&#34;192.168.2.200&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>remote_backup_dir</span><span class=o>=</span><span class=s2>&#34;/backups&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Email address for notifications</span>
</span></span><span class=line><span class=cl><span class=nv>notification_email</span><span class=o>=</span><span class=s2>&#34;alerts@example.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create a backup with tar in local dir, send it to a remote server, and send a notification when done</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=s2>&#34;</span><span class=nv>$local_backup_dir</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>backup_path</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$local_backup_dir</span><span class=s2>/</span><span class=k>$(</span>date +%Y-%m-%d<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>tar -czvf <span class=s2>&#34;</span><span class=nv>$backup_path</span><span class=s2>.tar.gz&#34;</span> -C <span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=k>$(</span>basename <span class=nv>$local_backup_dir</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$?</span> -eq <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Backup succeeded.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Backup failed.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rsync -avz --delete <span class=s2>&#34;</span><span class=nv>$backup_path</span><span class=s2>.tar.gz&#34;</span> <span class=s2>&#34;</span><span class=nv>$remote_user</span><span class=s2>@</span><span class=nv>$remote_server</span><span class=s2>:</span><span class=nv>$remote_backup_dir</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$?</span> -eq <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Transfer succeeded.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Transfer failed.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Backup completed on </span><span class=k>$(</span>date<span class=k>)</span><span class=s2>.&#34;</span> <span class=p>|</span> mail -s <span class=s2>&#34;Backup completed&#34;</span> <span class=s2>&#34;</span><span class=nv>$notification_email</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Define a cronjob that runs this backup every 3 days at 10pm</span>
</span></span><span class=line><span class=cl><span class=o>(</span>crontab -l <span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;0 22 */3 * * /bin/bash /path/to/script.sh&#34;</span><span class=o>)</span> <span class=p>|</span> crontab -
</span></span></code></pre></td></tr></table></div></div><h3 id=snapshots-with-timeshift>Snapshots with Timeshift<a hidden class=anchor aria-hidden=true href=#snapshots-with-timeshift>#</a></h3><p><a href=https://github.com/linuxmint/timeshift>Timeshift</a> is a free and open-source backup/restore utility for Linux systems.</p><p>It creates snapshots of the file system, allowing users to restore their system to a previous state if needed. Timeshift can be run manually or scheduled to run automatically using cron.</p><p>Snapshots can be stored locally or remotely, and users can choose the number of snapshots to keep and the frequency of snapshots.</p><p>You can create a bash script for defining how you would like timeshift to run, make sure to include <code>sudo</code> when running:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># Set the snapshot directory</span>
</span></span><span class=line><span class=cl><span class=nv>snapshot_dir</span><span class=o>=</span><span class=s2>&#34;/run/timeshift/&lt;drive&gt;/backup&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set the maximum number of snapshots to keep</span>
</span></span><span class=line><span class=cl><span class=nv>max_snapshots</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set the backup level (can be &#34;system&#34; or &#34;home&#34;)</span>
</span></span><span class=line><span class=cl><span class=nv>backup_level</span><span class=o>=</span><span class=s2>&#34;system&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create a new snapshot with Timeshift</span>
</span></span><span class=line><span class=cl>timeshift --snapshot --create --comments <span class=s2>&#34;Automated snapshot on </span><span class=k>$(</span>date +%Y-%m-%d<span class=k>)</span><span class=s2>&#34;</span> --backup-device <span class=s2>&#34;</span><span class=nv>$backup_level</span><span class=s2>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>You can then add this entry to your crontab to have cron run it every 3 days at 1am, or after your backups are done.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>0</span> <span class=m>1</span> */3 * * /home/user/scripts/timeshift-auto.sh
</span></span></code></pre></td></tr></table></div></div><p>If you would like to simply add it to <code>cron</code> manually, you can simply add the following:</p><p>Make sure to specify the <code>&lt;drive></code> under <code>--backup-device</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>0</span> <span class=m>1</span> */3 * * /usr/bin/timeshift --snapshot --create --comments <span class=s2>&#34;Automated snapshot on </span><span class=k>$(</span>date +<span class=se>\%</span>Y-<span class=se>\%</span>m-<span class=se>\%</span>d<span class=k>)</span><span class=s2>&#34;</span> --backup-device <span class=s2>&#34;/run/timeshift/&lt;drive&gt;/backup&#34;</span> --scripted
</span></span></code></pre></td></tr></table></div></div><h2 id=learn-more>Learn More<a hidden class=anchor aria-hidden=true href=#learn-more>#</a></h2><p>Make sure to check out the <a href=https://www.gnu.org/software/bash/manual/>official Bash manual</a> and other awesome guides like The Linux Documentation Project&rsquo;s <a href=http://www.tldp.org/LDP/Bash-Beginners-Guide/html/>Beginner</a> and <a href=http://www.tldp.org/LDP/abs/html/>Advanced Bash Scripting Guide</a>, GreyCat&rsquo;s <a href=https://mywiki.wooledge.org/BashGuide>BashGuide</a>, and <a href=https://www.commandlinefu.com/commands/browse>commandlinefu</a>.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Although Bash is useful for automating tasks on a single host, if you wish to replicate this and multiply it across a multitude of hosts, you should take a look at my other <a href=/posts/2023-02/automate-your-infrastructure-with-ansible>Ansible post</a>, where we take this to another level.</p><p>In conclusion, bash scripting is a powerful tool that enables users to automate tasks and streamline workflows in Unix-based operating systems.</p><p>By writing scripts, you can save time, reduce errors, and improve productivity.</p><h3 id=learn-more-1>Learn More<a hidden class=anchor aria-hidden=true href=#learn-more-1>#</a></h3><ul><li><a href=https://www.gnu.org/software/bash/manual/bash.pdf>Official GNU Bash Manual</a></li><li><a href=https://www.learnshell.org/>learnshell.org</a></li><li><a href=https://mywiki.wooledge.org/BashGuide>BashGuide</a></li><li><a href=https://tldp.org/LDP/Bash-Beginners-Guide/html/>TLDP</a></li><li><a href="https://www.youtube.com/playlist?list=PL18DF64CBBAEAAE77">MrTutorize YouTube Series</a></li><li><a href=https://www.codecademy.com/learn/learn-the-command-line>Code Academy</a></li><li><a href=https://devhints.io/bash>Devhints.io Cheat Sheet</a></li><li><a href=https://wiki.bash-hackers.org/>BashHackers</a></li></ul><h3 id=tools>Tools<a hidden class=anchor aria-hidden=true href=#tools>#</a></h3><ul><li><a href=https://www.shellcheck.net/>Shellcheck</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://netsparse.dev/tags/linux/>linux</a></li><li><a href=https://netsparse.dev/tags/bash/>bash</a></li><li><a href=https://netsparse.dev/tags/scripting/>scripting</a></li><li><a href=https://netsparse.dev/tags/automation/>automation</a></li><li><a href=https://netsparse.dev/tags/sysadmin/>sysadmin</a></li></ul><nav class=paginav><a class=prev href=https://netsparse.dev/posts/2023-03/quick-powershell-scripting/><span class=title>« Prev</span><br><span>Quick Intro To Powershell</span></a>
<a class=next href=https://netsparse.dev/posts/2023-03/getting-started-with-git/><span class=title>Next »</span><br><span>Getting Started With Git</span></a></nav></footer><script src=https://utteranc.es/client.js repo=netsparse/main-site-hugo issue-term=pathname theme=photon-dark crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://netsparse.dev>Netsparse · Angel Nevarez</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>